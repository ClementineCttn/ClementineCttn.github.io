<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Research</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="research_files/libs/clipboard/clipboard.min.js"></script>
<script src="research_files/libs/quarto-html/quarto.js"></script>
<script src="research_files/libs/quarto-html/popper.min.js"></script>
<script src="research_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="research_files/libs/quarto-html/anchor.min.js"></script>
<link href="research_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="research_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="research_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="research_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="research_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="research_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="research_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="research_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="research_files/libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="research_files/libs/leaflet-1.3.1/leaflet.js"></script>
<link href="research_files/libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="research_files/libs/proj4-2.6.2/proj4.min.js"></script>
<script src="research_files/libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="research_files/libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="research_files/libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="research_files/libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="research_files/libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Research</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><a href="http://clementinecttn.github.io/">&lt;- Back to home page</a></p>
<p>I am an urban geographer specialised in the economic, social and spatial aspects of inequality in cities. My <a href="http://clementinecttn.github.io/Website/research#research-ongoing">on-going research</a> project SEGUE deals with the identification and modeling of the combination of economic, geographic, sociological and demographical drivers of urban economic segregation. I have a strong <a href="http://clementinecttn.github.io/Website/research#interest">research interest</a> in analytical urban models and systematic literature reviews. <a href="http://clementinecttn.github.io/Website/research#research-previous">Past projects</a> involves research on urban scaling laws and urbanisartion in the post-Soviet space.</p>
<section id="research-positions" class="level3">
<h3 class="anchored" data-anchor-id="research-positions">Research positions</h3>
<div class="cell">
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-9c5128f47509073e3349" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-9c5128f47509073e3349">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[52.0055648,4.3681619],3,[]],"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[52.0055648,51.5219617,48.8447567],[4.3681619,-0.1384865,2.3399484],10,null,null,{"interactive":true,"className":"","stroke":false,"color":"#E30B5C","weight":5,"opacity":0.5,"fill":true,"fillColor":"#E30B5C","fillOpacity":0.5},null,null,["2020-... Assistant professor in Urban Studies (TU Delft BK - Urbanism)","2014-2017 Research associate (UCL-CASA)","2018-... Research associate (CNRS-CMH) | 2011-2014 PhD Candidate in Urban Geography (U. Paris 1 Panth√©on Sorbonne)"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[47.2599601,39.037904,7,null,null,{"interactive":true,"className":"","stroke":false,"color":"#85001D","weight":5,"opacity":0.5,"fill":true,"fillColor":"#85001D","fillOpacity":0.5},null,null,null,null,"Research Assistant (U. of Southern Russia)",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[47.2599601,52.0055648],"lng":[-0.1384865,39.037904]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="research-ongoing" class="level2">
<h2 class="anchored" data-anchor-id="research-ongoing">On-going project</h2>
<p>My main line of research revolves around the integration of multiple mechanisms of economic segregation in analytical models of cities. This is the core of my <a href="erc-segue.nl">ERC Starting Grant SEGUE</a>, which started in September 2022 and will run until August 2027.</p>
<p>The knowledge gaps related to the evolution of urban economic segregation in multiple cities can be reduced first, by accounting for the economic composition and inequality dynamics of the entire system (nationally), and second, by accounting for individual and family trajectories of economic mobility, through a focus on demographic factors and wealth transmission. Although these national and individual processes are well documented empirically and theoretically, we do not know where they materialise (between and within cities) and how they interact with other spatial processes.</p>
<p>The innovative ambition of <strong>SEGUE</strong> is to consider, for the first time, the analysis of processes of (re-)production of inequality which affect the spatial distribution of economic groups in cities through the construction of a modular agent-based model, calibrated on exhaustive longitudinal and geolocated empirical microdata from the Netherlands.</p>
<p>My ultimate objective is to use this model to assess and compare different policy strategies (typical, past and current) to reduce urban inequality and economic segregation in a cost-effective and time-saving way: within the virtual laboratory of a simulation (in silico). This objective can only be fulfilled if the relevant drivers of urban economic segregation are accounted for jointly.</p>
</section>
<section id="research-interest" class="level2">
<h2 class="anchored" data-anchor-id="research-interest">Current research Topics</h2>
<section id="research-models" class="level3">
<h3 class="anchored" data-anchor-id="research-models">Analytical urban models of urban inequality</h3>
<p>In my research, I use analytical models to integrate and archive multidisciplinary knowledge on cities and to highlight patterns and stylised facts which are not currently well understood and explained. Following epistemological developments in analytical sociology <span class="citation" data-cites="hedstrom2005dissecting">(<a href="#ref-hedstrom2005dissecting" role="doc-biblioref">Hedstrom, 2005</a>)</span>, I defend the idea that descriptive models (e.g.&nbsp;statistical regression) and generative models (e.g.&nbsp;agent-based models - ABMs) can be used in combination to produce better and more robust causal explanations of collective urban phenomena such as economic segregation.</p>
<p>To operationalise this idea, I review existing knowledge and relevant models <span class="citation" data-cites="cottineau2024unforeseen">(<a href="#ref-cottineau2024unforeseen" role="doc-biblioref">Cottineau et al., 2024</a>)</span> <span class="citation" data-cites="sarkar2024spatial">(<a href="#ref-sarkar2024spatial" role="doc-biblioref">Sarkar et al., 2024</a>)</span>, combine them into modular infrastructure of agent-based modelling <span class="citation" data-cites="cottineau2015modular">(<a href="#ref-cottineau2015modular" role="doc-biblioref">Cottineau et al., 2015</a>)</span>, and use empirical microdata to test hypotheses <span class="citation" data-cites="cottineau2020nested">(<a href="#ref-cottineau2020nested" role="doc-biblioref">Cottineau &amp; Arcaute, 2020</a>)</span> <span class="citation" data-cites="askenazy2024geography">(<a href="#ref-askenazy2024geography" role="doc-biblioref">Askenazy &amp; Cottineau, 2024</a>)</span>.</p>
</section>
<section id="research-review" class="level3">
<h3 class="anchored" data-anchor-id="research-review">Systematic literature reviews</h3>
<p>Systematic literature reviews have been a method of choice that I have used, developed and argued for in urban studies and agent-based modelling over the past 5 years <span class="citation" data-cites="cottineau2017metazipf">(<a href="#ref-cottineau2017metazipf" role="doc-biblioref">Cottineau, 2017a</a>)</span> <span class="citation" data-cites="cottineau2022analyses">(<a href="#ref-cottineau2022analyses" role="doc-biblioref">Cottineau, 2022</a>)</span> <span class="citation" data-cites="janssen2023gentrification">(<a href="#ref-janssen2023gentrification" role="doc-biblioref">Janssen et al., 2023</a>)</span> <span class="citation" data-cites="cottineau2024generative">(<a href="#ref-cottineau2024generative" role="doc-biblioref">Cottineau, 2024</a>)</span> because they are particularly suited to multidisciplinary research fields (where it is easy to miss literature in a different discipline because a given concept or process is known and studied under a different term) and when we are interested in reviewing emerging methods such as ABMs (where most models are built from scratch for a single use, hindering cumulative knowledge and the incremental improvement of models). Using this experience, I now work on improving approaches and sharing open toolboxes available for urban researchers and agent-based modellers to conduct systematic reviews <span class="citation" data-cites="achter2024conduct">(<a href="#ref-achter2024conduct" role="doc-biblioref">Achter et al., 2024</a>)</span> <span class="citation" data-cites="SLRbanismWorkingPaper">(<a href="#ref-SLRbanismWorkingPaper" role="doc-biblioref">Cottineau-Mugadza et al., 2024</a>)</span>.</p>
</section>
</section>
<section id="research-previous" class="level2">
<h2 class="anchored" data-anchor-id="research-previous">Previous projects</h2>
<ul>
<li><p>In the past, I have studied urban scaling laws and how the delineation of cities (for instance the choice of density and commuting thresholds) affected their estimation <span class="citation" data-cites="cottineau2017diverse">(<a href="#ref-cottineau2017diverse" role="doc-biblioref">Cottineau et al., 2017</a>)</span> <span class="citation" data-cites="finance2019absent">(<a href="#ref-finance2019absent" role="doc-biblioref">Finance &amp; Cottineau, 2019</a>)</span> <span class="citation" data-cites="cottineau2019mobile">(<a href="#ref-cottineau2019mobile" role="doc-biblioref">Cottineau &amp; Vanhoof, 2019</a>)</span>.</p></li>
<li><p>As part of my PhD research, I looked into the specificity of urbanisation in the post-Soviet space, using general models as baseline <span class="citation" data-cites="cottineau2011processus">(<a href="#ref-cottineau2011processus" role="doc-biblioref">Cottineau, 2011</a>)</span> <span class="citation" data-cites="cottineau2012intermediate">(<a href="#ref-cottineau2012intermediate" role="doc-biblioref">Cottineau, 2012</a>)</span> <span class="citation" data-cites="cottineau2015modular">(<a href="#ref-cottineau2015modular" role="doc-biblioref">Cottineau et al., 2015</a>)</span> <span class="citation" data-cites="cottineau2017peut">(<a href="#ref-cottineau2017peut" role="doc-biblioref">Cottineau, 2017b</a>)</span> and considering urban shrinkage <span class="citation" data-cites="cottineau2016multilevel">(<a href="#ref-cottineau2016multilevel" role="doc-biblioref">Cottineau, 2016</a>)</span> <span class="citation" data-cites="cottineau2018russian">(<a href="#ref-cottineau2018russian" role="doc-biblioref">Cottineau &amp; Frost, 2018</a>)</span>.</p></li>
</ul>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-line-spacing="2" role="list">
<div id="ref-achter2024conduct" class="csl-entry" role="listitem">
Achter, S., Borit, M., Cottineau, C., Meyer, M., Polhill, J. G., &amp; Radchuk, V. (2024). How to conduct more systematic reviews of agent-based models and foster theory development-taking stock and looking ahead. <em>Environmental Modelling &amp; Software</em>, <em>173</em>, 105867.
</div>
<div id="ref-askenazy2024geography" class="csl-entry" role="listitem">
Askenazy, P., &amp; Cottineau, C. (2024). The geography of collective bargaining in french multi-establishment companies. <em>Industrial Relations: A Journal of Economy and Society</em>.
</div>
<div id="ref-cottineau2011processus" class="csl-entry" role="listitem">
Cottineau, C. (2011). Processus de m<span>√©</span>tropolisation dans l‚Äôespace frontalier post-sovi<span>√©</span>tique: L‚Äôexemple de rostov-sur-le-don. <em>Cybergeo: European Journal of Geography</em>.
</div>
<div id="ref-cottineau2012intermediate" class="csl-entry" role="listitem">
Cottineau, C. (2012). An intermediate system. Trajectories of russian cities between general dynamics and specific histories. <em>Espace g<span>√©</span>ographique (English Edition)</em>, <em>41</em>(3), 247‚Äì265.
</div>
<div id="ref-cottineau2016multilevel" class="csl-entry" role="listitem">
Cottineau, C. (2016). A multilevel portrait of shrinking urban russia. <em>Espace Populations Soci<span>√©</span>t<span>√©</span>s. Space Populations Societies</em>, <em>2015/3-2016/1</em>.
</div>
<div id="ref-cottineau2017metazipf" class="csl-entry" role="listitem">
Cottineau, C. (2017a). MetaZipf. A dynamic meta-analysis of city size distributions. <em>PloS One</em>, <em>12</em>(8), e0183919.
</div>
<div id="ref-cottineau2017peut" class="csl-entry" role="listitem">
Cottineau, C. (2017b). Peut-on estimer la singularit<span>√©</span> des villes (post-) sovi<span>√©</span>tiques? <em><span>√â</span>conomie R<span>√©</span>gionale Et Urbaine</em>, <em>1</em>, 5‚Äì32.
</div>
<div id="ref-cottineau2022analyses" class="csl-entry" role="listitem">
Cottineau, C. (2022). What do analyses of city size distributions have in common? <em>Scientometrics</em>, <em>127</em>(3), 1439‚Äì1463.
</div>
<div id="ref-cottineau2024generative" class="csl-entry" role="listitem">
Cottineau, C. (2024). Generative modelling. In R. Harris, A. Heppenstall, &amp; L. J. Wolf (Eds.), <em>A research agenda for spatial analysis</em> (pp. 113‚Äì124). Elgar.
</div>
<div id="ref-cottineau2020nested" class="csl-entry" role="listitem">
Cottineau, C., &amp; Arcaute, E. (2020). The nested structure of urban business clusters. <em>Applied Network Science</em>, <em>5</em>(1), 1‚Äì20.
</div>
<div id="ref-cottineau2018russian" class="csl-entry" role="listitem">
Cottineau, C., &amp; Frost, I. (2018). The russian urban system: Evolution engaged with transition. In D. Pumain, C. Rozenblat, &amp; E. Velasquez (Eds.), <em>International and transnational perspectives on urban systems</em> (pp. 263‚Äì284). Springer.
</div>
<div id="ref-cottineau2017diverse" class="csl-entry" role="listitem">
Cottineau, C., Hatna, E., Arcaute, E., &amp; Batty, M. (2017). Diverse cities or the systematic paradox of urban scaling laws. <em>Computers, Environment and Urban Systems</em>, <em>63</em>, 80‚Äì94.
</div>
<div id="ref-cottineau2024unforeseen" class="csl-entry" role="listitem">
Cottineau, C., M., B., Benenson, I., Delloye, J., Hatna, E., Pumain, D., Sarkar, S., Tannier, C., &amp; Ubareviƒçienƒó, R. (2024). The role of analytical models and their circulation in urban studies and policy. <em>Urban Studies</em>, <em>OnlineFirst</em>.
</div>
<div id="ref-cottineau2015modular" class="csl-entry" role="listitem">
Cottineau, C., Reuillon, R., Chapron, P., Rey-Coyrehourcq, S., &amp; Pumain, D. (2015). A modular modelling framework for hypotheses testing in the simulation of urbanisation. <em>Systems</em>, <em>3</em>(4), 348‚Äì377.
</div>
<div id="ref-cottineau2019mobile" class="csl-entry" role="listitem">
Cottineau, C., &amp; Vanhoof, M. (2019). Mobile phone indicators and their relation to the socioeconomic organisation of cities. <em>ISPRS International Journal of Geo-Information</em>, <em>8</em>(1), 19.
</div>
<div id="ref-SLRbanismWorkingPaper" class="csl-entry" role="listitem">
Cottineau-Mugadza, C., Forgaci, C., Janssen, K. M. J., Li, B., Zhang, S., &amp; Zhang, X. (2024). <em>Guidelines and open-source toolbox for systematic literature reviews in the field of urbanism</em>. SocArXiv. <a href="https://doi.org/10.31235/osf.io/w5b8v">https://doi.org/10.31235/osf.io/w5b8v</a>
</div>
<div id="ref-finance2019absent" class="csl-entry" role="listitem">
Finance, O., &amp; Cottineau, C. (2019). Are the absent always wrong? Dealing with zero values in urban scaling. <em>Environment and Planning B: Urban Analytics and City Science</em>, <em>46</em>(9), 1663‚Äì1677.
</div>
<div id="ref-hedstrom2005dissecting" class="csl-entry" role="listitem">
Hedstrom, P. (2005). <em>Dissecting the social: On the principles of analytical sociology</em>. Cambridge University Press.
</div>
<div id="ref-janssen2023gentrification" class="csl-entry" role="listitem">
Janssen, K. M. J., Cottineau, C., Kleinhans, R., &amp; Bueren, E. van. (2023). Gentrification and the origin and destination of movers: A systematic review. <em>Tijdschrift Voor Economische En Sociale Geografie</em>, <em>114</em>(4), 300‚Äì318.
</div>
<div id="ref-sarkar2024spatial" class="csl-entry" role="listitem">
Sarkar, S., Cottineau-Mugadza, C., &amp; Wolf, L. J. (2024). Spatial inequalities and cities: A review. <em>Environment and Planning B: Urban Analytics and City Science</em>, <em>OnlineFirst</em>.
</div>
</div>
<p><a href="http://clementinecttn.github.io/">Back to home page</a></p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>